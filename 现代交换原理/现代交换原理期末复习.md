2023/5/29

# 现代交换原理期末复习

rongtianfu@gmail.com

预期的题型：

- 10个单选，每个1分
- 10个判断，每个1分
- 大题80分，涵盖计算、分析和设计
  - 6到8题
  - 综合性强
  - PSTN+移动网络+VoIP/软交换+MPLS+交换网络设计等
  - 七号信令流程/SIP流程等

## Chapter 1 交换概论

通信网三要素：

- 终端设备
- 传送设备
- 交换设备



三对基本概念：

- 信息传递：
  - 面向连接：建立、通信、释放
    - 物理连接
    - 逻辑连接
  - 无连接：例如传统IP网络（边选路边传送信息），无连接的好处是灵活性更强
- 时分复用：
  - 同步：电路交换网络PSTN（因为话音固定比特率，对实时性要求高，所以采用同步时分复用
  - 统计：例如IP、ATM，好处是信道利用率高（没有信息传送的时候不占用信道）
  - 异步：统计时分复用的一种，往往特指ATM，也可以泛指
- 带宽分配：
  - 固定：例如PSTN（划定的时隙），位置化信道
  - 可变：分组方式（统计方式），例如SIP中的数据传输便采用分组交换



不同交换方式的比较：

PTA



## Chapter 2 交换网络

交换网络的一般结构可以分为两部分：

- 控制子系统
- 信息传输子系统

如果在分组传输中，也是这样的，只是名字有所不同：

- 控制面
- 转发面



注意：在比较两个网络的时候，交换单元、拓扑结构、控制方式，这三个东西缺一不可！



交换单元需支持：

- 点到点
- 广播
- 组播

共三种方式。



空间交换单元——开关阵列：

- 开关数量要会计算：$入线数\times出线数$
- 模拟信号和数字信号都能传输（数字信号通过分时隙实现？）
- 没有内部阻塞
- S接线器是开关阵列和控制存储器CM组成的
  - 输入控制方式
  - 输出控制方式



了解开关阵列的多种实现方式，其中多路选择器构造的开关适用于输出控制方式（针对出线选入线）。



时间交换单元既能用于交换同步时分复用、又能用于交换统计/异步时分复用。

- T接线器：实现同一母线上的时隙交换
  - 输入控制方式
  - 输出控制方式
- T接线器的扩展：加上复用器（串并变换）和分路器（并串变换）
  - 外部时隙：进入复用器之前的时隙
  - 内部时隙：进入复用器之后到分路器之前的时隙
- 复用后，内部时隙总数就是简单乘法，例如8条HW，则经过复用之后有$8\times32$个时隙



CLOS网络一般考三级的，如果更高级则需要递归构造。



构造开关数量最少的某种交换网络：一般可以采取枚举的方式。



Banyan网络是常考的：

- 多个连接可以同时接通
- 自动选路（0上路1下路，从左开始）、唯一路径、树型结构
- 缺点：存在內部阻塞和出现冲突
  - 会举出内部阻塞的例子
  - 解决内部阻塞方法一：构造多通路，具体而言：
    - 增长型Banyan：例如3级到5级，5级就是benes网络
    - 扩展性Banyan
    - 膨胀型Banyan
  - 解决内部阻塞方法二：使用排序Banyan网络（batcher-banyan）



Benes网络也是常考的，两种构造方法：

- 递归构造
- 从Banyan对称得到



TST网络常和PSTN、SIP等结合考察，例如将TST作为交换机内部的设计。

- 要求掌握TST有阻塞和无阻塞的例子与判定条件
- 要求两个T采用不同的控制方式，这样输入输出可以共用CM存储器，共用还有一个条件：半帧选择法



## Chapter 3 电路交换

电路交换的用户模块：

- 用户电路：七大功能BORSCHT，要求掌握七大功能的具体原理以及何时起作用
  - 常常与中继电路的功能进行杂糅考察，码型变换（从？到？）是中继线路最重要的功能
- 用户级交换网络：完成话务集中操作



会议电话（多对一）的实现原理会考：非线性可加变成线性可加，然后？



控制系统控制方式：

- 集中式：负荷分担
- 分散式：
  - 全分散
  - 分级分散



需要掌握多处理机工作方式。



处理机之间通信方式：

- 总线方式
- 利用PCM上的时隙



交换系统软件组成：

- 数据库系统：需要会判断哪些是局数据？哪些是用户数据？
  - 在PSTN中，用户数据的局数据都存储在交换机上
  - 而在GSM中，为了实现MSC（？）控制与数据分离，同时为了保证移动网络移动性，（用户？）数据不可存放在一个交换机中，而是存储在HLR/VLR中
- 某某



呼叫处理是SDL驱动的：

- 输入处理
- 分析处理：
  - 宽泛点讲：状态分析（跑SDL图）
  - 三个具体任务：
    - 来话分析：分析对象是呼入数据
    - 去话分析：分析对象是呼出数据
    - 号码分析
- 任务执行
- 输出处理：如送回铃音



关于如何考察SDL图的几个思路：

- 给状态确定输入条件是否完备，如，振铃状态下有多少中输入情况？
- 没有任何输入（无外部输入并且页没有内部超时），则SDL图不会转移
- 要求会画SDL图
- 课上，主叫被叫在一个交换机，所画的SDL图是一张SDL图；但实际上，如果主叫和被叫不在一个交换机上，则SDL图需要画两张（分开的），会出现诸如“主叫需要等待被叫”这种情况？
- 给出SDL图，要求会写出代码
- 给出代码，要求会画出SDL图
- 纯画SDL图时，必须要把所有条件考虑完全。常考问题是输入条件不全，让我们补充输入条件



BHCA是必考的：$t=a+bN$

- $a$往往是直接给出的
- 多个处理机时，当如何？总的$N$直接就是各个$N$相加
- 提高BHCA的方法，从公式入手，常见有：
  - 增加几个CPU处理机
  - 精简指令集，使$b$尽可能变小
  - 等等

- 关于过负荷，注意类似“50%过负荷”这种表述的含义。50%过负荷时性能下降到50%是不可取的，一般来说，50%过负荷只允许性能下降到90%



注意任务分级制度，主要是谁能打断谁的问题：

- 基本级：最低
- 周期级
- 故障级：最高



要求掌握时间表调度原理，注意：一般不要求摘挂机检测达到10ms级，因为人达不到这个精度。



## Chapter 4 分组交换

综合业务网ISDN不交换模拟信号！只交换数字信号！



注意ATM与分组交换之区别：

- ATM：固定匹配（可以硬件方式进行转发）
- IP：最长匹配，（谁是固定连接、谁是无连接？？？）



MPLS多协议标记交换：

- 要会画交换过程：经过边界路由器（进入/离开）、经过非边界路由器
- MPLS的上层和下层都支持多协议（上层可以是IPv4、IPv6；下层可以是各种关于“帧”的协议）
- MPLS交换的是带标记的分组，而不是分组（IP路由器交换的是分组）
- MPLS是精确的标记匹配
- MPLS的链路建立和分组转发是分开进行的（分离的）
- 只有转发路径相同的才能叫做LSP（必须完全相同！）
- MPLS的格式可能会考，尤其是label中的字段：
  - label：标记，多少bits？
  - exp：服务质量，3bit
  - S：标记当前标签是否处于栈底，1bit
  - TTL：多少bits？
- 注意MPLS上可承载在不同网络上，PPT上说了如何将label封装到不同的网络上



通常FEC以IP地址前缀划分，当然也有不同的划分方式，不变的是：FEC和LSP是一一对应的。



需要非常熟悉各个网元的作用，例如LER标价边界、打标；而LSR则取出label、查询转发信息库LIB、转发（注意：LSR在解析的时候不需要解析具体的IP，只需要解析标记label即可）等等。



需要非常熟悉标记分发过程，LDP（正向的、反向的），下游按需标记分配，转发信息库LIB的填写，等。



MPLS一般不单独考，而是与软件换结合起来考，例如大题中的小问考察MPLS。



电话和计算机连接到MPLS如何进行转发？

- 打标VS不打标？？
- label转发VS IP转发？？



## Chapter 5 信令与协议

支撑网包括：信令网、数字同步网、管理网。



需要熟悉信令分类。



7号信令是中继线上的局间信令。



NO.7信令协议栈需要非常熟悉，其中：

- INAP用于智能网
- MAP用于移动网
- 其他各种UP用于什么网？



信令单元对应“帧”级别，是一个二层概念（对应MTP2），具体需要熟悉：

- MSU
- LSSU
- FISU



标准信令流程会考，常与SIP协议一起考，形如？？？



我国信令网的三级结构。



分组交换中实现语音的初始化是SIP协议（IETF提出的），采用了C/S架构（将UA分为UAC和UAS），SIP是基于文本的应用层协议。SIP不仅在互联网上用，移动网上也可以用（同时支持固定网和移动网）。



需要熟悉各种具体的SIP消息及其格式（例如via字段，采用栈方式记录途径“跳”），尤其是cancel和？？的区别。



## Chapter 6 移动通信技术

GSM是固定带宽分配的（因为GSM是电路方式），GSM的各个设备都要详细掌握。



GMSC是连通（2G的）GSM域与PSTN域等。



需要熟悉三个概念：

- 漫游：不同MSC才能叫作漫游
- 切换：需要注意在不同场景下由什么设备控制（从BTS1到BTS2，宽泛讲是由网络控制；具体讲：如果在同一个BSC下，则由这个BSC负责，如果不在同一BSC下，则由更上层负责，总而言之就是由最近的公共祖先来负责！）
- 位置更新：用户终端主动发起的



需要非常熟悉呼叫建立过程：

- 始呼
- 寻呼：寻呼范围是同一个LAI（LA）下

经过哪些网元设备？如何协同工作？



要能画出用户上网数据流（经过哪些设备？如何交互？）



GPRS网络：有何设备？各自干啥？

- GPRS支持电路域和分组域，自然就有电路交换和分组交换？？
- BSC分配无线（分组？）信道



对比：

- GSM是信道绑定的（固定带宽）
- GPRS则是动态的



MSC管理用户的移动性 and SGSN负责管理移动性，这两个如何对的上？



4G的几个关键点：

- 4G是全IP的（话音/分组）
- 呼叫控制是由MME完成的
- SGSN和GGSN对应S-Gateway和R-Gateway？？？
- IP地址是由PGW分配的



5G的几个关键点：

- 核心思路：网元微服务化
- 5G新技术：密集部署、增强容量；从1G到5G，带宽不断上升，但覆盖面不断下降
- 5G组网方式：非独立组网，手机必须同时打开4G和5G



## Chapter 7 新一代交换控制技术

NGN：

- 以软件换为核心
  - 软交换不涉及4G/5G，只支持固定网！
  - 而IMS则在3G阶段提出，同时支持移动网和固定网
- 各层名称？各层关键设备？
- 核心交换网基于MPLS
- 三种网关各自负责干什么？
- 如何与传统网相连？
- 业务控制与呼叫控制相分离
- 呼叫控制与承载相分离



IMS（基础是SIP协议）：

- 业务控制与呼叫控制相分离
- 呼叫控制与承载相分离
- 呼叫控制与媒体控制相分离



注意北桥和南桥之概念，以及：北桥未标准化，南桥已经标准化（openflow协议）。



SDN基于流表进行转发（不是路由表！）。